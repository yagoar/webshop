<h2 class="text-center">Kontoübersicht</h2>
<div class="row">
  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ">
    <button class="btn btn-primary pull-right" (click)="logout()">Abmelden</button>
  </div>
</div>
<div class="row">
  <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
    <div class="order-conf-panel">
      <h4>Benutzerinformationen</h4>
      {{user.firstName}} {{user.lastName}} <br>
      {{user.email}}<br>
      <br>
      <button class="btn btn-primary" (click)="changePassword=true" [disabled]="changePassword">Passwort ändern</button> <br>
      <alert *ngIf="changePWFailed"  type="danger" dismissible="true" (click)="changePWFailed = false">Passwort ändern fehlgeschlagen</alert>
      <alert *ngIf="changePWSuccess"  type="success" dismissible="true" (click)="changePWSuccess = false">Passwort erfolgreich geändert</alert>
      <div *ngIf="changePassword" id="change-pw">
        <form (ngSubmit)="changePW()">
          <div class="form-group">
            <label for="previousPassword">Altes Passwort</label>
            <input type="password" class="form-control" id="previousPassword" name="previousPassword" [(ngModel)]="previousPassword" #oldPW="ngModel" required />
          </div>
          <div class="form-group">
            <label for="newPassword">Neues Passwort</label>
            <input type="password" class="form-control" id="newPassword" name="newPassword" [(ngModel)]="newPassword" minlength="8" #newPW="ngModel" required />
          </div>
          <div class="form-group">
            <button type="submit" class="btn btn-secondary">Ändern</button>
            <button type="button" class="btn btn-secondary" (click)="cancelChangePassword()">Abbrechen</button>
          </div>
        </form>
      </div>
      <button id="change-email-btn" class="btn btn-primary" (click)="changeEmail=true" [disabled]="changeEmail">E-Mail ändern</button>
      <br>
      <alert *ngIf="changeEmailFailed"  type="danger" dismissible="true" (click)="changeEmailFailed = false">E-Mail-Adresse ändern fehlgeschlagen</alert>
      <alert *ngIf="changeEmailSuccess"  type="success" dismissible="true" (click)="changeEmailSuccess = false">E-Mail-Adresse erfolgreich geändert</alert>
      <div *ngIf="changeEmail">
        <form (ngSubmit)="changeEmailAddr()">
          <div class="form-group">
            <label for="newEmail">Neue E-Mail</label>
            <input type="text" class="form-control" id="newEmail" name="newEmail" [(ngModel)]="newEmail" #newMail="ngModel" required />
          </div>
          <div class="form-group">
            <button type="submit" class="btn btn-secondary">Ändern</button>
            <button type="button" class="btn btn-secondary" (click)="cancelChangeEmail()">Abbrechen</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
    <div class="order-conf-panel">
      <h4>Rechnungsadresse</h4>
      <span *ngIf="billingAddress.gender=='FEMALE'">Frau</span>
      <span *ngIf="billingAddress.gender=='MALE'">Herr</span>
      {{billingAddress.firstName}} {{billingAddress.lastName}} <br>
      {{billingAddress.streetNo}}<br>
      {{billingAddress.zip}} {{billingAddress.city}}<br>
      {{billingAddress.country}}<br>
      <br>
      <button class="btn btn-primary" (click)="changeAddress('billing')">Rechnungsadresse ändern</button>
    </div>
  </div>
  <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
    <div class="order-conf-panel">
      <h4>Lieferadresse</h4>
      <span *ngIf="shippingAddress.gender=='FEMALE'">Frau</span>
      <span *ngIf="shippingAddress.gender=='MALE'">Herr</span>
      {{shippingAddress.firstName}} {{shippingAddress.lastName}} <br>
      {{shippingAddress.streetNo}} <br>
      {{shippingAddress.zip}} {{shippingAddress.city}}<br>
      {{shippingAddress.country}}<br>
      <br>
      <button class="btn btn-primary" (click)="changeAddress('shipping')">Lieferadresse ändern</button>
    </div>
  </div>
</div>

<!-- Order history -->
<order-history></order-history>